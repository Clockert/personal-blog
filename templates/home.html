{% extends "base.html" %} {% block title %}Home - My Blog{% endblock %} {% block
content %}
<div class="posts-container">
  <div class="posts-header">
    <h2>Recent Posts</h2>
    {% if session.logged_in %}
    <a href="/post/new" class="btn-new-post">+ New Post</a>
    {% endif %}
  </div>

  <!-- Filter and Sort Bar -->
  <div class="filter-sort-bar">
    <!-- Browse by Tags Section -->
    {% if tags %}
    <div class="tags-section">
      <div class="tags-toggle-inline" onclick="toggleTags()">
        <span class="material-symbols-outlined">label</span>
        <span>Browse Tags</span>
        <span class="material-symbols-outlined chevron" id="chevron">expand_more</span>
      </div>
      <div class="tags-list-inline" id="tagsList" style="display: none">
        {% for tag in tags %}
        <a href="/tag/{{ tag }}" class="tag tag-browse">{{ tag }}</a>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <!-- Sort Dropdown -->
    <div class="sort-dropdown">
      <label for="sortSelect">Sort by:</label>
      <select id="sortSelect" onchange="window.location.href='/?sort=' + this.value">
        <option value="date_desc" {% if current_sort == 'date_desc' %}selected{% endif %}>Newest First</option>
        <option value="date_asc" {% if current_sort == 'date_asc' %}selected{% endif %}>Oldest First</option>
        <option value="title_asc" {% if current_sort == 'title_asc' %}selected{% endif %}>Title (A-Z)</option>
        <option value="title_desc" {% if current_sort == 'title_desc' %}selected{% endif %}>Title (Z-A)</option>
      </select>
    </div>
  </div>

  {% for post in posts %}
  <article class="post-preview">
    {% if post.image_url %}
    <div class="post-image">
      <img src="{{ post.image_url }}" alt="{{ post.title }}" />
    </div>
    {% endif %}

    <div class="post-heading">
      <h3>{{ post.title }}</h3>
      <p class="post-meta">Published on {{ post.date }}</p>

      {% if post.tags %}
      <div class="post-tags">
        {% for tag in post.tags.split(', ') %}
        <a href="/tag/{{ tag }}" class="tag">{{ tag }}</a>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <p class="post-excerpt">{{ post.excerpt }}</p>

    <a href="/post/{{ post.id }}" class="read-more">Read more â†’</a>
  </article>
  {% endfor %}
</div>
{% endblock %}
