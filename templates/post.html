{% extends "base.html" %} {% block title %}{{ post.title }} - My Blog{% endblock
%} {% block content %}
<div class="post-container">
  <article class="post-full">
    <div class="post-header-actions">
      <div>
        <h2>{{ post.title }}</h2>
        <p class="post-meta">Published on {{ post.date|norwegian_date }}</p>
      </div>

      {% if session.logged_in %}
      <div class="post-actions">
        <a href="/post/{{ post.id }}/edit" class="btn-icon" title="Edit post">
          <span class="material-symbols-outlined">edit</span>
        </a>
        <form
          method="POST"
          action="/post/{{ post.id }}/delete"
          style="display: inline"
          onsubmit="return confirm('Are you sure you want to delete this post?');"
        >
          <button type="submit" class="btn-icon btn-delete" title="Delete post">
            <span class="material-symbols-outlined">delete</span>
          </button>
        </form>
      </div>
      {% endif %}
    </div>

    {% if post.tags %}
    <div class="post-tags">
      {% for tag in post.tags.split(', ') %}
      <a href="/tag/{{ tag }}" class="tag">{{ tag }}</a>
      {% endfor %}
    </div>
    {% endif %} {% if post.image_url %}
    <div class="post-image-full">
      <img src="{{ post.image_url }}" alt="{{ post.title }}" />
    </div>
    {% endif %}

    <div class="post-content">{{ post.content }}</div>

    <a href="/" class="back-link">‚Üê Back to all posts</a>
  </article>

  <!-- Comments Section -->
  <div class="comments-section">
    <h3>
      <span class="material-symbols-outlined">comment</span>
      Comments ({{ comments|length }})
    </h3>

    <!-- Comment Form -->
    <div class="comment-form-container">
      <h4>Leave a Comment</h4>
      <form method="POST" class="comment-form">
        <div class="form-group">
          <label for="author">Name</label>
          <input
            type="text"
            id="author"
            name="author"
            placeholder="Your name (optional)"
          />
        </div>

        <div class="form-group">
          <label for="comment_text">Comment *</label>
          <textarea
            id="comment_text"
            name="comment_text"
            rows="4"
            required
            placeholder="Share your thoughts..."
          ></textarea>
        </div>

        <button type="submit" class="btn-primary">Post Comment</button>
      </form>
    </div>

    <!-- Display Comments -->
    {% if comments %}
    <div class="comments-list">
      {% for comment in comments %}
      <div class="comment">
        <div class="comment-header">
          <span class="comment-author">
            <span class="material-symbols-outlined">person</span>
            {{ comment.author }}
          </span>
          <div class="comment-meta">
            <span class="comment-date">{{ comment.date }}</span>
            {% if session.logged_in %}
            <form
              method="POST"
              action="/comment/{{ comment.id }}/delete"
              style="display: inline"
              onsubmit="return confirm('Delete this comment?');"
            >
              <button
                type="submit"
                class="btn-icon btn-icon-small btn-delete"
                title="Delete comment"
              >
                <span class="material-symbols-outlined">delete</span>
              </button>
            </form>
            {% endif %}
          </div>
        </div>
        <div class="comment-text">{{ comment.comment_text }}</div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="no-comments">No comments yet. Be the first to comment!</p>
    {% endif %}
  </div>
</div>
{% endblock %}
